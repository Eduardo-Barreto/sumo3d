<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot Sumo VR - All Japan Style</title>
    <meta name="description" content="Experiência imersiva de pilotar um robô sumô no estilo All Japan Robot Sumo Tournament">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="hud" role="complementary" aria-label="Controles do jogo">
        <h1 class="hud-title">Robot Sumo</h1>
        <ul class="hud-controls" aria-label="Lista de controles">
            <li><span class="key">W</span><span class="key">A</span><span class="key">S</span><span class="key">D</span> Mover</li>
            <li><span class="key">R</span> Resetar</li>
        </ul>
        <div class="hud-status" id="status" aria-live="polite"></div>
    </div>

    <script src="js/constants.js"></script>
    <script src="js/input.js"></script>
    <script src="js/game.js"></script>
    <script src="js/box.js"></script>

    <a-scene
        background="color: #050505"
        shadow="type: pcfsoft"
        vr-mode-ui="enabled: true"
        loading-screen="dotsColor: #0ff; backgroundColor: #000">

        <!-- Lighting -->
        <a-entity light="type: ambient; color: #BBB; intensity: 0.3"></a-entity>
        <a-entity
            light="type: spot; angle: 35; penumbra: 0.3; castShadow: true; intensity: 1.5; color: #fff"
            position="0 4 0"
            rotation="-90 0 0">
        </a-entity>
        <a-entity light="type: point; intensity: 0.4; color: #88f; distance: 8" position="-2 3 -2"></a-entity>
        <a-entity light="type: point; intensity: 0.3; color: #f88; distance: 8" position="2 3 2"></a-entity>

        <!-- Arena -->
        <a-entity id="arena" position="0 0 0">
            <!-- Dohyo: 154cm diameter = 0.77m radius -->
            <a-cylinder
                id="dohyo"
                radius="0.77"
                height="0.13"
                segments-radial="64"
                position="0 0.065 0"
                color="#111"
                material="roughness: 0.9"
                shadow="receive: true">
            </a-cylinder>

            <!-- Tawara (white border ring) -->
            <a-ring
                radius-inner="0.72"
                radius-outer="0.77"
                segments-theta="64"
                position="0 0.131 0"
                rotation="-90 0 0"
                color="#FFF"
                material="shader: flat">
            </a-ring>

            <!-- Shikiri lines (starting lines) -->
            <a-box position="-0.15 0.132 0" width="0.02" depth="0.30" height="0.001" color="#A52" material="shader: flat"></a-box>
            <a-box position="0.15 0.132 0" width="0.02" depth="0.30" height="0.001" color="#A52" material="shader: flat"></a-box>

            <!-- Safety zones -->
            <a-box position="0.95 0.025 0" width="1.8" depth="4" height="0.05" color="#600" shadow="receive: true"></a-box>
            <a-box position="-0.95 0.025 0" width="1.8" depth="4" height="0.05" color="#006" shadow="receive: true"></a-box>

            <!-- Side ramps -->
            <a-box position="1.5 -0.3 0" rotation="0 0 -20" width="0.8" depth="3" height="0.05" color="#400"></a-box>
            <a-box position="-1.5 -0.3 0" rotation="0 0 20" width="0.8" depth="3" height="0.05" color="#004"></a-box>

            <!-- Floor -->
            <a-plane position="0 -0.01 0" rotation="-90 0 0" width="10" height="10" color="#0a0a0a" shadow="receive: true"></a-plane>
        </a-entity>

        <!-- Robot: 20x20x8cm total with wedge -->
        <a-entity
            id="robot-player"
            position="0 0.17 0"
            rotation="0 180 0"
            sumo-controls
            shadow="cast: true">
            <!-- Main body (smaller to fit wedge in 20cm) -->
            <a-box
                width="0.19"
                height="0.08"
                depth="0.16"
                color="#555"
                material="roughness: 0.8">
            </a-box>
            <!-- Front panel -->
            <a-plane
                width="0.17"
                height="0.06"
                position="0 0 -0.081"
                rotation="0 180 0"
                color="#333">
            </a-plane>
            <!-- Wedge (front blade) -->
            <a-box
                position="0 -0.035 -0.095"
                width="0.20"
                height="0.008"
                depth="0.04"
                rotation="-12 0 0"
                color="#444"
                material="metalness: 0.5; roughness: 0.5">
            </a-box>
        </a-entity>

        <!-- Cardboard Box -->
        <a-entity
            id="cardboard-box"
            position="0 0.23 -0.4"
            pushable-box
            shadow="cast: true">
            <!-- Main box -->
            <a-box
                width="0.20"
                height="0.20"
                depth="0.20"
                color="#c4a574"
                material="roughness: 1">
            </a-box>
            <!-- Tape stripe top -->
            <a-box
                position="0 0.101 0"
                width="0.04"
                height="0.002"
                depth="0.202"
                color="#d4a855"
                material="shader: flat">
            </a-box>
            <!-- Tape stripe front -->
            <a-box
                position="0 0 -0.101"
                width="0.04"
                height="0.202"
                depth="0.002"
                color="#d4a855"
                material="shader: flat">
            </a-box>
            <!-- Box flap lines -->
            <a-box position="0 0.098 -0.05" width="0.198" height="0.001" depth="0.002" color="#a08050" material="shader: flat"></a-box>
            <a-box position="0 0.098 0.05" width="0.198" height="0.001" depth="0.002" color="#a08050" material="shader: flat"></a-box>
        </a-entity>

        <!-- Camera -->
        <a-entity id="player-rig" position="0 0 2.2" rotation="-35 0 0">
            <a-camera
                look-controls="pointerLockEnabled: true"
                wasd-controls="enabled: false">
            </a-camera>
        </a-entity>

    </a-scene>
</body>
</html>
